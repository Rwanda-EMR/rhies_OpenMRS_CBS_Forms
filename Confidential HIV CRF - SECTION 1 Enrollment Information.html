<htmlform>

    <!-- Autogenerated example form  (template from 01-Nov-2010 -->
    <macros>
        @CBS_CONTACT_CODE@=41c410a4-18a4-4221-98ad-1daf1b22de4d
        @ENROLLED_IN_CBS@=0d09e8cb-6904-4465-9155-de62cc6a7c76
        @RESIDENCY_TYPE@=59525e15-fc5e-4bc4-9e29-87954348c15f
        @RESIDENCY_TYPE_SHELTER@=43021ec7-dea2-48c9-aea2-fce89d6bcd8d
        @RESIDENCY_TYPE_RESIDENTIAL@=054266d6-b451-496a-892e-9249d52a0d44
        @RESIDENCY_TYPE_HOMELESS@=48a489e3-37f1-40df-8e7b-a2e7ba2371ec
        @RESIDENCY_TYPE_TEMPORARY@=6e7401f4-ed93-4c3f-a208-73ec7a1a9126
        @CHANGE_OF_CURRENT_RESIDENCY_TYPE@=09926a9e-c926-4893-a8a1-bf942a3a321d
        @EMPLOYMENT_STATUS@=4587542b-f1aa-47ad-8bed-75a705433950
        @NONE@=3cd743f8-26fe-102b-80cb-0017a47871b2
        @TRADING@=3cd9786c-26fe-102b-80cb-0017a47871b2
        @FARMER@=3cd9757e-26fe-102b-80cb-0017a47871b2
        @STUDENT@=3cd976f0-26fe-102b-80cb-0017a47871b2
        @UNEMPLOYED@=3cd979de-26fe-102b-80cb-0017a47871b2
        @OTHER_NON-CODED@=3cee7fb4-26fe-102b-80cb-0017a47871b2
        @MANUAL_LABORER@=3cd995ae-26fe-102b-80cb-0017a47871b2
        @SHEPHERD@=3cdcc170-26fe-102b-80cb-0017a47871b2
        @BREWER@=3cdcc2ec-26fe-102b-80cb-0017a47871b2
        @SHOP_OWNER@=3cdcc468-26fe-102b-80cb-0017a47871b2
        @FRUIT_OR_VEGETABLE_SELLER@=3cdcbff4-26fe-102b-80cb-0017a47871b2
        @MINER@=3cdcbd06-26fe-102b-80cb-0017a47871b2
        @FACTORY_WORKER@=3cdcbe78-26fe-102b-80cb-0017a47871b2
        @HOUSEWORK@=3cda14e8-26fe-102b-80cb-0017a47871b2
        @HOUSEWORK_FIELDWORK@=3ce40fca-26fe-102b-80cb-0017a47871b2
        @RETIRED@=3ce4113c-26fe-102b-80cb-0017a47871b2
        @MAIN_ACTIVITY_NON_CODED@=3ce41a38-26fe-102b-80cb-0017a47871b2
        @UNKNOWN@=3cd6fac4-26fe-102b-80cb-0017a47871b2
        @TOO_SICK_TO_WORK@=a2c0bdcf-f4ba-4e10-9af4-d9ad7dcc2ca4
        @SCHOOL_AGE_BUT_NOT_IN_SCHOOL@=1ed2c51d-7d4d-44df-9257-48eaf61a2f7a
        @DRIVER@=f15d07f0-be62-44d4-89ef-0e17e0aa480e
        @PROFESSIONAL@=907716b4-1852-404a-9ee1-beff998f9461
        @MAIN_ACTIVITY@=3cd97286-26fe-102b-80cb-0017a47871b2
        @HIV_TESTING_CLINIC@=151a4503-8b27-4d17-9ebf-a94cdf02e028
        @VCT_PROGRAM@=3cdc8426-26fe-102b-80cb-0017a47871b2
        @ANC_Program@=0a48138e-f478-4ad7-bb10-d9efdbf9fe27
        @LABOR_AND_DELIVERY_PROGRAM@=2b9fd535-2222-4418-9249-ddb851362424
        @TRANSFER_IN@=031ea34b-f95b-4cf7-a3c6-026f6fd60f1f
        @PIT@=d261f305-93ee-47ef-a327-0243783637e0
        @DATE_HIV_POISITIVE_RESULT_CONFIRMED@=93721b11-0a32-44a3-8b4e-64664becffb8
        @HIV_TESTING_FACILITY_NAME@=75efa569-f095-4caf-9a44-f8d8e4564a4a
        @VAGINAL_OR_ANAL_SEX_WITHOUT_CONDOMS_IN_LAST_12_MONTHS@=788e9f4c-5ba4-4a42-9974-83ea7128f0f8
        @NUMBER_OF_LIFETIME_SEXUAL_PARTNERS@=3cdca69a-26fe-102b-80cb-0017a47871b2
        @SEXUAL_PARTNERS_IN_LAST_12_MONTHS@=06de84ee-6deb-4d33-b2b6-bc680a73939c
        @SEXUAL_PARTNERS_IN_LAST_3_MONTHS@=a17088c6-ea9e-4bf6-96ef-85cf9f06d432
        @SEX_WITH_MALE@=a116b5b4-8973-43ac-8007-c070b4199a53
        @SEX_WITH_FEMALE@=8191ff34-f72e-4f67-af0a-82acebca682a
        @CBS_SEX_WITH_HIV_POSITIVE_PERSON@=b195b807-2213-4831-aeb8-0ac03cd139e4
        @SEX_WITH_COMMERCIAL_SEX_WORKER@=d37d8242-2626-4404-94fd-5e78877457ab
        @SEX_WITH_MULTIPLE_PARTNERS@=a239017b-7bc1-421e-b348-d526e7ebd9d7
        @IS/HAS_BEEN_COMMERCIAL_SEX_WORKER@=8726f435-566e-4c98-920d-b93ce22224b7
        @RECENCY_ASSAY_TEST@=e06cffdb-024c-45af-b148-fa275d368fc0
        @RECENCY_TEST_NAME@=5119a7e8-d4c6-4380-8c12-420cb3deff4d
        @RECENCY_ASSAY_RESULTS@=b4b0e241-e41a-4d46-89dd-e531cf6d8202
        @RECENCY_TEST_DATE@=f97c7656-6369-426a-9597-b3fb9acf25af
        @RECENCY_VIRAL_LOAD_RESULT_DATE@=f4e3f60a-2f62-47bc-b968-156b3df91067
        @RECENT@=fb3b2a61-4f4b-46b2-9187-9ec769349a44
        @LONG-TERM@=819f5ebe-0b3e-44ba-b435-8f3d1b7bb130
        @INVALID@=9340dede-5124-49cf-9b3c-5153cc0e537f
        @NEGATIVE@=3cd28732-26fe-102b-80cb-0017a47871b2
        @RECENCY_SAMPLE_COLLECTION_DATE@=774f49dc-cd95-4f7e-a20f-b38f9a1f52c4
        @COUNSELLED_ON_LINKAGE@=a80a32ae-7683-49cd-abda-1cd946f0f445
        @LINKED_TO_TREATMENT@=0cf3bed0-e76a-4b0a-8e11-c61c945a0551
        @REASON_NOT_LINKED_TO_TREATMENT@=e9b54b65-0880-47fd-b7ac-59a33b586312
        @LINKED_TO_TREATMENT_AT_THIS_FACILITY@=a1ce679f-1f65-468c-97c3-c81d7ff38399
        @LINKED_TO_TREATMENT_IN_OTHER_FACILITY@=ae57702c-dddf-4eff-b2a2-a7063a5d98bb
        @INITIATED_ON_TPT@=c341a733-630f-420f-ace6-80f6d463bc39
        @TPT_START_DATE@=403b928f-1fcf-458b-93d9-74c04f4c0fbc
        @REASON_NOT_INITIATED_ON_TPT@=97533455-8642-4b0a-947a-f730bf39da09
        @PATIENT_NOT_WILLING@=bf6340df-3048-497b-9afe-3c574db3b362
        @TPT_IS_CONTRA_INDICATED@=58e3707d-3310-4560-b7a8-ad963ad302cb
        @PATIENT_IN_TUBERCULOSIS_TREATMENT@=8f77f097-f2d4-4c26-97c6-a32863dd2dec
        @TPT_DRUGS_OUT_OF_STOCK@=39cecd62-41b5-4673-a6aa-54cb5fd1246b
        @OTHER_REASON_PATIENT_NOT_INITIATED_ON_TPT@=3c4ef122-ce21-4b2f-b9e7-65f5d84a7758
        @STABLE@=fab9afe9-8c11-4e31-9898-399b083fd9d6
        @YES@=3cd6f600-26fe-102b-80cb-0017a47871b2
        @NO@=3cd6f86c-26fe-102b-80cb-0017a47871b2
        @UNKNOWN@=3cd6fac4-26fe-102b-80cb-0017a47871b2
        @PATIENT_REFUSED@=efab937b-853e-47da-b97e-220f1bdff97d
        @CURRENTLY_ON_ART@=c7df527f-eef0-4cdc-b142-c5a387b4c363
        @NEW_HIV_DIAGNOSIS@=87842c52-dc3d-41d7-9baa-9c0da45c5df4
        @CBS_INDEX_CASE_TYPE@=b45597da-318b-4dde-858b-da16f5950686
        @ART_INITIATED_AT_FACILITY@=e4a2d73e-fa66-42cf-b9e4-c61da0fb041a
        @ART_START_LOCATION@=d3892b43-18be-4870-8d9b-02f5318f9cd5
        @LAST_PHARMACY_PICK_UP@=f47620e7-a45f-4b29-a3b3-7bcd6958e7a4

        @PREGNANCY_CHECK@=be075303-3a46-4b89-8b8c-912acb2a75e7
        @OPD_ARV_IPD_TB_SELECTION@=1b79cdbb-82ba-4228-ab11-b4e2363a86f0
        @OPD_TEST@=9e5e7ffc-6eb8-4d0f-a1a8-319eed6399fb
        @ARV_TEST@=acd19161-816a-40a1-beac-a18bfc861b58
        @IPD_TEST@=58ee5fc5-2af0-440b-b5f5-d54852fe66ea
        @TB_TEST@=48c3029e-7295-4d18-92c3-9872a3286108
        @IN_PATIENT@=eb86013d-446e-404b-9a22-82eb57f55532
        @NUTRITION@=0b9ec1eb-49ca-48dc-9aa6-63366b2104b3
        @VMMC@=b253739d-918d-4131-a268-ee698e120a98
        @OTHER_SPECIFY@=924a301c-c556-4f87-9476-226c0f8b2859
        @OTHER_SPECIFY_PIT@=e5d5be46-28be-4ec8-a4a8-2ae10c0c039c
        @REASON_LIKEND_TO_FACILITY@=6b45806a-a6cf-4d95-b165-031569788fe8
        @RESIDENCY_TYPE_CORRECTION@=05544cd8-ead3-472a-98cd-02094d1e7c27

        <!-- Concept added by lcdamy -->
        @WHO_STAGE@=3cdb3b02-26fe-102b-80cb-0017a47871b2
        @WHO_STAGE_1@=3cd7ee16-26fe-102b-80cb-0017a47871b2
        @WHO_STAGE_2@=3cd7ef9c-26fe-102b-80cb-0017a47871b2
        @WHO_STAGE_3@=3cd7f118-26fe-102b-80cb-0017a47871b2
        @WHO_STAGE_4@=3cd7f294-26fe-102b-80cb-0017a47871b2
        @WHO_STAGING_DATE@=91b0d6ea-f0fa-461c-9de3-a3018e803ea0
        @CD4@=3ceda710-26fe-102b-80cb-0017a47871b2
        @DATE_OF_RETURNED_RESULT@=c19867c0-fec9-404c-bf25-6cf7a8c54eb7
        @RECENCY_VIRAL_LOAD_RESULT@=aae8d7fe-8bbc-4d2e-926c-0e28b4d0e046
        @RECENCY_COLLECTION_DATE@=fa87bb43-ebcc-4919-96f8-c5013ce1bbca
        @OI_NAME@=a1956646-837c-4421-8a33-b294b62aee97
        @OI_DATE@=6781dba8-422d-455b-a26c-41a99c744444
        @STABLE_HIDE@=a650f583-8b61-4772-bae0-200dc81a463b

        paperFormId = (Fill this in)
        headerColor =#009d8e
        fontOnHeaderColor = white
    </macros>

    <style>
        th.tableHeader {
            background-color: #009d8e;
            color: #FFFFFF;
            font-size: 16px;
            text-align: left;
        }

        .section {
            border: 1px solid #009d8e;
            padding: 2px;
            text-align: left;
            margin-bottom: 1em;
        }

        .sectionHeader {
            background-color: #009d8e;
            color: white;
            display: block;
            padding: 2px;
            font-weight: bold;
            text-align: center;
        }

        tr.spaceUnder>td {
            padding-bottom: 1em;
        }

        td {
            font-size: 15px;
        }

        table.baseline-aligned td {
            vertical-align: baseline;
        }

        table,
        td,
        th {
            border: 1px solid black;
            border-collapse: collapse;
        }

        th {
            text-align: left;
            background-color: #D9D9D9;
            font-size: 12px;
        }

        .error {
            display: none;
        }

        .lables {
            width: 200px;
        }

        table {
            width: 100%;
        }

        .selectedCancerStagingKeys {
            page-break-before: always;
            border: 0px;
        }

        table.selectedCancerStagingKeys td {
            border: 0px;
        }

        .mandotory-star {
            color: #ff0000;
        }
    </style>
    <script type="text/javascript">

        if (jQuery) {
            $j(document).ready(function () {

                $j(function () {
                    $j("#obs1").hide();
                    var myvalue1 = $j("#look1").text();
                    setValue('obs_value1.value', myvalue1.trim());
                });

                var url = new URL(window.location.href);

                if (url.searchParams.get("mode") == "EDIT") {//Edit
                    console.log("Mode Edit");
                    $j('.other_reason_here').hide();
                    hideByDefault();
                } else if (url.searchParams.get("formId")) {//Creation
                    $j('.other_reason_here').hide();
                    console.log("Mode formId");
                } else {//View the form
                    console.log("Mode view");
                    $j('.other_reason_here').hide();
                    hideByDefault();
                }

                function hideByDefault() {
                    toggleInput('employmentStatus');
                    toggleInput('Testing_Clinic');
                    toggleInput('if_pit_other_selected');
                    toggleInput('Testing_Clinic');
                    toggleInput('Recency_Assay_test_done');
                    toggleInput('treatLink');
                    toggleInput('yeswhereTreatLink');
                    toggleInput('tbMeds');
                    toggleInput('otherTbMed');
                    toggleInput('indexType');
                    toggleInput('Counselled_on_Linkage');
                }

                $j('#employmentStatus').click(function () {
                    toggleInput('employmentStatus');
                });

                $j('#Testing_Clinic').click(function () {
                    toggleInput('Testing_Clinic');
                });

                $j('#if_pit_other_selected').change(function () {
                    toggleInput('if_pit_other_selected');
                });

                $j('#Testing_Clinic').click(function () {
                    toggleInput('Testing_Clinic');
                });

                $j('#Recency_Assay_test_done').click(function () {
                    toggleInput('Recency_Assay_test_done');
                });

                $j('#treatLink').click(function () {
                    toggleInput('treatLink');
                });

                $j('#yeswhereTreatLink').click(function () {
                    toggleInput('yeswhereTreatLink');
                });

                $j('#tbMeds').click(function () {
                    toggleInput('tbMeds');
                });

                $j('#otherTbMed').change(function () {
                    toggleInput('otherTbMed');
                });

                $j('#indexType').click(function () {
                    toggleInput('indexType');
                });

                $j('#Counselled_on_Linkage').click(function () {
                    toggleInput('Counselled_on_Linkage');
                });



                function toggleInput(mode) {
                    switch (mode) {
                        case 'Testing_Clinic':
                            if (!getValue('Testing_Clinic.value')) {
                                $j('#if_pit').hide();
                                $j('#if_pit_other').hide();
                                return;
                            }
                            if (getValue('Testing_Clinic.value') == "105605") {
                                $j('#if_pit').show();
                            } else {
                                $j('#if_pit').hide();
                                $j('#if_pit_other').hide();
                            }
                            break;
                        case 'if_pit_other_selected':
                            if (!getValue('if_pit_other_selected.value')) {
                                $j('#if_pit_other').hide();
                                return;
                            }
                            if (getValue('if_pit_other_selected.value') == "111209") {
                                $j('#if_pit_other').show();
                            } else {
                                $j('#if_pit_other').hide();
                            }
                            break;
                        case 'indexType':
                            if (!getValue('indexType.value')) {
                                $j('#indexTypeonart').hide();
                                return;
                            }
                            if (getValue('indexType.value') == "105631") {
                                $j('#indexTypeonart').show();
                            } else {
                                $j('#indexTypeonart').hide();
                            }
                            break;
                        case 'employmentStatus':
                            if (!getValue('employmentStatus.value')) {
                                $j('#occupation').hide();
                                return;
                            }
                            if (getValue('employmentStatus.value') == "1065") {
                                $j('#occupation').show();
                            } else {
                                $j('#occupation').hide();
                            }
                            break;
                        case 'Recency_Assay_test_done':
                            if (!getValue('Recency_Assay_test_done.value')) {
                                $j('#Test_name').hide();
                                $j('#Test_date').hide();
                                $j('#Recency_assay_results').hide();
                                return;
                            }
                            if (getValue('Recency_Assay_test_done.value') == "1065") {
                                $j('#Test_name').show();
                                $j('#Test_date').show();
                                $j('#Recency_assay_results').show();
                            } else {
                                $j('#Test_name').hide();
                                $j('#Test_date').hide();
                                $j('#Recency_assay_results').hide();
                            }
                            break;
                        case 'Counselled_on_Linkage':
                            if (!getValue('Counselled_on_Linkage.value')) {
                                $j('#Counselled_on_Linkage_yes').hide();
                                $j('#Counselled_on_Linkage_yes_2').hide();
                                return;
                            }
                            if (getValue('Counselled_on_Linkage.value') == "1065") {
                                $j('#Counselled_on_Linkage_yes').show();
                                $j('#Counselled_on_Linkage_yes_2').hide();
                            } else {
                                $j('#Counselled_on_Linkage_yes').hide();
                                $j('#Counselled_on_Linkage_yes_2').hide();
                            }
                            break;
                        case 'treatLink':
                            if (!getValue('treatLink.value')) {
                                $j('#noTreatLink').hide();
                                $j('#yesTreatLink').hide();
                                $j('#Counselled_on_Linkage_yes_2').hide();
                                return;
                            }
                            if (getValue('treatLink.value') == "1066") {
                                $j('#noTreatLink').show();
                                $j('#yesTreatLink').hide();
                                $j('#Counselled_on_Linkage_yes_2').hide();
                            } else {
                                $j('#noTreatLink').hide();
                                $j('#yesTreatLink').show();
                                $j('#Counselled_on_Linkage_yes_2').show();
                            }
                            break;
                        case 'yeswhereTreatLink':
                            console.log(getValue('yeswhereTreatLink.value'));
                            if (!getValue('yeswhereTreatLink.value')) {
                                $j('#whereTreatLink').hide();
                                return;
                            }
                            if (getValue('yeswhereTreatLink.value') == "1066") {
                                $j('#whereTreatLink').show();
                            } else {
                                $j('#whereTreatLink').hide();
                            }
                            break;
                        case 'tbMeds':
                            if (!getValue('tbMeds.value')) {
                                $j('#yesTbMeds').hide();
                                $j('#noTbMeds').hide();
                                $j('#reasonOtherTbMed').hide();
                                return;
                            }
                            if (getValue('tbMeds.value') == "1065") {
                                $j('#yesTbMeds').show();
                                $j('#noTbMeds').hide();
                                $j('#reasonOtherTbMed').hide();
                            } else {
                                $j('#reasonOtherTbMed').hide();
                                $j('#noTbMeds').show();
                                $j('#yesTbMeds').hide();
                            }
                            break;
                        case 'otherTbMed':
                            if (getValue('otherTbMed.value') == "105609") {
                                $j('#reasonOtherTbMed').show();
                            } else {
                                $j('#reasonOtherTbMed').hide();
                            }
                            break;
                        default:
                            console.log(mode);
                    }
                }

                //If  submission does not work redirect with an error message
                beforeSubmit.push(function () {
                    var date = getValue('encounterDate.value');
                    var location = getValue('encounterLocation.value');
                    var provider = getValue('encounterProvider.value');

                    var ispatientenrolled = getValue('ispatientenrolled.value');
                    var patientenrolleddate = getValue('patientenrolleddate.value');
                    var indexType = getValue('indexType.value');
                    var residence_type = getValue('residence_type.value');
                    var employmentStatus = getValue('employmentStatus.value');
                    var occupation = getValue('occupation.value');
                    var pregnancyStatus = getValue('occupation.value');
                    var how_relation_sex = getValue('how_relation_sex.value');
                    var lifetime_sexual = getValue('lifetime_sexual.value');
                    var sexual_Partner_12 = getValue('sexual_Partner_12.value');
                    var sexual_Partner_3 = getValue('sexual_Partner_3.value');

                    var Sex_with_male = getValue('Sex_with_male.value');
                    var Sex_with_female = getValue('Sex_with_female.value');
                    var Sex_with_hiv_person = getValue('Sex_with_hiv_person.value');
                    var Sex_with_commercial_sex_worker = getValue('Sex_with_commercial_sex_worker.value');
                    var Sex_with_multiple_person = getValue('Sex_with_multiple_person.value');
                    var been_commercial_sex_worker = getValue('been_commercial_sex_worker.value');

                    var Testing_facility_name = getValue('Testing_facility_name.value');
                    var Testing_Clinic = getValue('Testing_Clinic.value');
                    var Recency_Assay_test_done = getValue('Recency_Assay_test_done.value');
                    var Counselled_on_Linkage = getValue('Counselled_on_Linkage.value');
                    var treatLink = getValue('treatLink.value');
                    var tbMeds = getValue('tbMeds.value');
                    var stable = getValue('stable.value');

                    console.log([date, location, provider, ispatientenrolled, patientenrolleddate, indexType, residence_type, employmentStatus, occupation, pregnancyStatus, how_relation_sex, lifetime_sexual, sexual_Partner_12, sexual_Partner_3, Sex_with_male, Sex_with_female, Sex_with_hiv_person, Sex_with_commercial_sex_worker, Sex_with_multiple_person, been_commercial_sex_worker, Testing_facility_name, Testing_Clinic, Recency_Assay_test_done, Counselled_on_Linkage, treatLink, tbMeds, stable]);

                    if (!date == true || date == "") {
                        getField('encounterDate.error').html('This field is required').show();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return false;
                    } else {
                        getField('encounterDate.error').html('This field is required').hide();
                    }
                    if (!location == true || location == "") {
                        getField('encounterLocation.error').html('This field is required').show();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return false;
                    } else {
                        getField('encounterLocation.error').html('This field is required').hide();
                    }
                    if (!provider == true || provider == "") {
                        getField('encounterProvider.error').html('This field is required').show();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return false;
                    } else {
                        getField('encounterProvider.error').html('This field is required').hide();
                    }
                    if (!Sex_with_male == true || Sex_with_male == "") {
                        getField('Sex_with_male.error').html('This field is required').show();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return false;
                    } else {
                        getField('Sex_with_male.error').html('This field is required').hide();
                    }
                    if (!Sex_with_female == true || Sex_with_female == "") {
                        getField('Sex_with_female.error').html('This field is required').show();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return false;
                    } else {
                        getField('Sex_with_female.error').html('This field is required').hide();
                    }
                    if (!Sex_with_hiv_person == true || Sex_with_hiv_person == "") {
                        getField('Sex_with_hiv_person.error').html('This field is required').show();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return false;
                    } else {
                        getField('Sex_with_hiv_person.error').html('This field is required').hide();
                    }
                    if (!Sex_with_commercial_sex_worker == true || Sex_with_commercial_sex_worker == "") {
                        getField('Sex_with_commercial_sex_worker.error').html('This field is required').show();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return false;
                    } else {
                        getField('Sex_with_commercial_sex_worker.error').html('This field is required').hide();
                    }
                    if (!Sex_with_multiple_person == true || Sex_with_multiple_person == "") {
                        getField('Sex_with_multiple_person.error').html('This field is required').show();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return false;
                    } else {
                        getField('Sex_with_multiple_person.error').html('This field is required').hide();
                    }
                    if (!been_commercial_sex_worker == true || been_commercial_sex_worker == "") {
                        getField('been_commercial_sex_worker.error').html('This field is required').show();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        return false;
                    } else {
                        getField('been_commercial_sex_worker.error').html('This field is required').hide();
                    }
                    return true;
                });

            });
        }
    </script>

    <span style="float:right">Paper Form ID: $paperFormId</span>
    <h2>Confidential HIV CRF (v0.1)</h2>
    <p><strong> SECTION 1: Enrollment Information</strong></p>
    <!--===============================   Section 1 =======================================  -->
    <section headerLabel="1. Encounter Details">
        <table class="baseline-aligned" cellspacing="0" cellpadding="6" width="100%">
            <tr>
                <td width="50%">Date:</td>
                <td>
                    <encounterDate id="encounterDate" /> <span class="mandotory-star">*</span>
                </td>
            </tr>
            <tr>
                <td>Location:</td>
                <td>
                    <encounterLocation default="486" id="encounterLocation" /> <span class="mandotory-star">*</span>
                </td>
            </tr>
            <tr>
                <td>Provider:</td>
                <td>
                    <encounterProvider id="encounterProvider" required="true" /> <span class="mandotory-star">*</span>
                </td>
            </tr>
        </table>
    </section>
    <table cellspacing="0" cellpadding="6" width="100%">
        <tr>
            <th colspan="2" style="text-align:center">INDEX TESTING, PARTNER NOTIFICATION, RECENCY TESTING</th>
        </tr>
        <tr>
            <td width="50%">
                UPID &#160;&#160;&#160;
                <lookup class="value"
                    complexExpression="#foreach( $patId in $patientIdentifiers.get('UPID') ) $patId #end " />
            </td>
            <td><strong> Index case type (Type de cas index):</strong>
                <div>
                    <obs conceptId="$@CBS_INDEX_CASE_TYPE@" answerConceptIds="$@NEW_HIV_DIAGNOSIS@, $@CURRENTLY_ON_ART@"
                        answerLabels="Newly diagnosed (Nouvellement diagnostiqué VIH+), Currently on ART (Déjà sous ARV)"
                        style="radio" id="indexType" />
                </div>
                <div id="indexTypeonart" class="other_reason_here">
                    <strong> If Currently on ART (Si actuellement sous ART):</strong><br />
                    <obs conceptId="$@ART_START_LOCATION@"
                        answerConceptIds="$@ART_INITIATED_AT_FACILITY@, $@TRANSFER_IN@"
                        answerLabels="Initiated treatment in this facility (Traitement initié par ce site) , Transfer in (Transfert entrant): "
                        style="radio" id="treatInit" />
                </div>
            </td>
        </tr>
    </table> <br />
    <!--===============================   Section 2 =======================================  -->
    <section headerLabel="2. Demographic Information">
        <table class="baseline-aligned" cellspacing="0" cellpadding="6" width="100%">
            <tr>
                <td>
                    <div>
                        <strong> Date od Birth <i>(dd/mm/yyy)</i> :</strong>
                        <lookup class="value" expression="patient.birthdate" />
                    </div>
                    <div>
                        <strong> Gender :</strong>
                        <lookup class="value" expression="patient.gender" />
                    </div>
                    <includeIf velocityTest="$patient.gender == 'F' ">
                        <div>
                            <strong> Si enceinte (If pregnant) :</strong>
                            <obs conceptId="$@PREGNANCY_CHECK@" answerConceptIds="$@YES@, $@NO@,$@UNKNOWN@"
                                answerLabels="Y, N,UKNOWN" style="radio" id="pregnancyStatus" />
                        </div>
                    </includeIf>
                </td>
                <td>
                    <div>
                        <strong> Current residence type <i>(Type d'adresse)</i>:</strong>
                        <obs conceptId="$@RESIDENCY_TYPE@"
                            answerConceptIds="$@RESIDENCY_TYPE_SHELTER@, $@RESIDENCY_TYPE_RESIDENTIAL@, $@RESIDENCY_TYPE_HOMELESS@, $@RESIDENCY_TYPE_TEMPORARY@, $@RESIDENCY_TYPE_CORRECTION@"
                            answerLabels="Shelter (Refuge), Residential (Residentielle), Homeless (Sans abri), Temporary (Temporaire), Correctional (Maison de detention)"
                            id="residence_type" />
                    </div>
                    <div>
                        <strong> Current residence <i>(Residence actuelle)</i>:</strong>
                        <br />
                        Province :&#160;&#160;&#160;&#160;
                        <lookup class="value" expression="patient.personAddress.stateProvince" />
                        <br />
                        District :&#160;&#160;&#160;&#160;
                        <lookup class="value" expression="patient.personAddress.countyDistrict" />
                        <br />
                        Sector :&#160;&#160;&#160;&#160;
                        <lookup class="value" expression="patient.personAddress.cityVillage" />
                        <br />
                        Cell :&#160;&#160;&#160;&#160;
                        <lookup class="value" expression="patient.personAddress.address3" />
                        <br />
                        Umudugudu :&#160;&#160;&#160;&#160;
                        <lookup class="value" expression="patient.personAddress.address1" />
                    </div>
                </td>
                <td>
                    <div>
                        <strong> Martial Status <i>(Etat Matrimonial)</i>:</strong>
                        <lookup class="value" expression="personAttributes.get('Civil Status')" />
                    </div>
                    <div>
                        <strong> Employment status<i> (Etat d'emploi)</i>:</strong>
                        <obs conceptId="$@EMPLOYMENT_STATUS@" answerConceptIds="$@YES@, $@NO@"
                            answerLabels="Employed (Employé), Unemployed  (Sans emploi)" style="radio"
                            id="employmentStatus" /> <br /><br />
                        <obs conceptId="$@MAIN_ACTIVITY@" labelText="Occupation:"
                            answerConceptIds="$@TRADING@,$@FARMER@,$@STUDENT@,$@UNEMPLOYED@,$@OTHER_NON-CODED@,$@MANUAL_LABORER@,$@SHEPHERD@,$@BREWER@,$@SHOP_OWNER@,$@FRUIT_OR_VEGETABLE_SELLER@,$@MINER@,$@FACTORY_WORKER@,$@HOUSEWORK@,$@RETIRED@,$@MAIN_ACTIVITY_NON_CODED@,$@UNKNOWN@,$@TOO_SICK_TO_WORK@,$@SCHOOL_AGE_BUT_NOT_IN_SCHOOL@,$@DRIVER@,$@PROFESSIONAL@"
                            id="occupation" class="other_reason_here" />
                    </div>
                </td>
            </tr>

        </table>
    </section>
    <!--===============================   Section 3 =======================================  -->
    <section headerLabel="HIV ACQUISITION RISK FACTORS">
        <table class="baseline-aligned" cellspacing="0" cellpadding="6" width="100%">
            <tr>
                <td width="50%">
                    <table cellspacing="0" cellpadding="6" width="100%">
                        <tr><strong>Vaginal or Anal sex without condoms in last 12 months:</strong><br><i>(Relation
                                sexuelle vaginale ou anale sans condom durant les 12 Derniers mois):</i></br>
                            <br>
                            <div>
                                <br>
                                <obs conceptId="$@VAGINAL_OR_ANAL_SEX_WITHOUT_CONDOMS_IN_LAST_12_MONTHS@"
                                    answerConceptIds="$@YES@,$@NO@,$@PATIENT_REFUSED@,$@UNKNOWN@"
                                    answerLabels="Yes,No, Refuse,Unknown" style="radio" id="how_relation_sex" />
                                </br>
                            </div>
                            </br>
                        </tr>
                        <tr>
                            <td><strong># Lifetime sexual partners: </strong> <br> (Nbr de Partenaires sexuels durant
                                votre vie)</br></td>
                            <td>
                                <obs conceptId="$@NUMBER_OF_LIFETIME_SEXUAL_PARTNERS@" id="lifetime_sexual" />
                            </td>
                        </tr><br> </br>
                        <tr>
                            <td><strong>#Sexual Partner in last 12 months: </strong><br>(Nbr de Partenaires sexuels
                                durant les 12 derniers mois)</br></td>
                            <td>
                                <obs conceptId="$@SEXUAL_PARTNERS_IN_LAST_12_MONTHS@" id="sexual_Partner_12" />
                            </td>
                        </tr><br> </br>
                        <tr>
                            <td><strong>#Sexual Partner in last 3 months:</strong> <br>(Nbr de Partenaires sexuels
                                durant les 3 derniers mois)</br></td>
                            <td>
                                <obs conceptId="$@SEXUAL_PARTNERS_IN_LAST_3_MONTHS@" id="sexual_Partner_3" />
                            </td>
                        </tr>
                    </table>
                </td>
                <td>
                    <table cellspacing="0" cellpadding="6" width="100%">
                        <tr><strong>Exposure Category (Catégorie d'exposition): </strong></tr>
                        <tr>
                            <td><strong>Sex with male:</strong><br>(Relation sexuelle avec un homme)</br></td>
                            <td>
                                <obs conceptId="$@SEX_WITH_MALE@"
                                    answerConceptIds="$@YES@,$@NO@,$@PATIENT_REFUSED@,$@UNKNOWN@"
                                    answerLabels="Yes,No,Refuse,Unknown" id="Sex_with_male" required="true"
                                    style="radio" /> <br /></td>
                        </tr>
                        <tr>
                            <td><strong>Sex with female:</strong><br>(Relation sexuelle avec un femme)</br></td>
                            <td>
                                <obs conceptId="$@SEX_WITH_FEMALE@"
                                    answerConceptIds="$@YES@,$@NO@,$@PATIENT_REFUSED@,$@UNKNOWN@"
                                    answerLabels="Yes,No,Refuse,Unknown" id="Sex_with_female" required="true"
                                    style="radio" /> <br /></td>
                        </tr>
                        <tr>
                            <td><strong>Sex with HIV+ person:</strong><br>(Relation sexuelle avec une PVV)</br></td>
                            <td>
                                <obs conceptId="$@CBS_SEX_WITH_HIV_POSITIVE_PERSON@"
                                    answerConceptIds="$@YES@,$@NO@,$@PATIENT_REFUSED@,$@UNKNOWN@"
                                    answerLabels="Yes,No,Refuse,Unknown" id="Sex_with_hiv_person" required="true"
                                    style="radio" />
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Sex with commercial sex worker:</strong><br>(Relation sexuelle avec un
                                travailleur de sexe)</br></td>
                            <td>
                                <obs conceptId="$@SEX_WITH_COMMERCIAL_SEX_WORKER@"
                                    answerConceptIds="$@YES@,$@NO@,$@PATIENT_REFUSED@,$@UNKNOWN@"
                                    answerLabels="Yes,No,Refuse,Unknown" id="Sex_with_commercial_sex_worker"
                                    required="true" style="radio" /> <br /></td>
                        </tr>
                        <tr>
                            <td><strong>Sex with multiple partners:</strong><br>(Relation sexuelle avec partenaires
                                multiples)</br></td>
                            <td>
                                <obs conceptId="$@SEX_WITH_MULTIPLE_PARTNERS@"
                                    answerConceptIds="$@YES@,$@NO@,$@PATIENT_REFUSED@,$@UNKNOWN@"
                                    answerLabels="Yes,No,Refuse,Unknown" id="Sex_with_multiple_person" required="true"
                                    style="radio" /> <br /></td>
                        </tr>
                        <tr>
                            <td><strong>Is/Has been commercial sex worker:</strong><br>(A ete travailleur de sexe)</br>
                            </td>
                            <td colspan="4">
                                <obs conceptId="$@IS/HAS_BEEN_COMMERCIAL_SEX_WORKER@"
                                    answerConceptIds="$@YES@,$@NO@,$@PATIENT_REFUSED@,$@UNKNOWN@"
                                    answerLabels="Yes,No,Refuse,Unknown" id="been_commercial_sex_worker" required="true"
                                    style="radio" /> <br /></td>
                        </tr>
                    </table>
                </td>
            </tr>

        </table>
    </section>
    <!--===============================   Section 4 =======================================  -->
    <section headerLabel="HIV Testing Information ">
        <table class="baseline-aligned" cellspacing="0" cellpadding="6" width="100%">
            <tr>
                <td width="50%">Testing facility name (Nom de la FOSA de dépistage)
                    <obs conceptId="$@HIV_TESTING_FACILITY_NAME@" id="Testing_facility_name" />
                </td>
                <td>Date of HIV positive results confirmation (Date de confirmation du status VIH) : &#160;&#160;
                    <lookup class="value" expression="fn.latestObs('1837').obsDatetime" />
                </td>
            </tr>
            <tr>
                <td colspan="2">Testing Clinic (Test clinique)&#160;&#160;&#160;&#160;
                    <obs conceptId="$@HIV_TESTING_CLINIC@"
                        answerConceptIds="$@VCT_PROGRAM@,$@ANC_Program@,$@LABOR_AND_DELIVERY_PROGRAM@,$@TRANSFER_IN@,$@PIT@"
                        answerLabels="VCT,ANC(CPN),L and D(Mat),Transfer IN, PIT " id="Testing_Clinic" style="radio" />
                    <br />
                    <div id="if_pit" class="other_reason_here">
                        <br />
                        If PIT(Si PIT) :
                        <obs conceptId="$@OPD_ARV_IPD_TB_SELECTION@"
                            answerConceptIds="$@OPD_TEST@,$@ARV_TEST@,$@IPD_TEST@,$@TB_TEST@,$@IN_PATIENT@,$@NUTRITION@,$@VMMC@,$@OTHER_SPECIFY@"
                            answerLabels="OPD,ARV,TPD,TB,IN-PATIENT,NUTRITION,VMMC,other" id="if_pit_other_selected" />
                        <br />
                    </div>
                    <div id="if_pit_other" class="other_reason_here">
                        <br />
                        If other is selected please specify (Si autre est sélectionné, veuillez préciser):
                        <obs conceptId="$@OTHER_SPECIFY_PIT@" />
                    </div>
                </td>
            </tr>
        </table>
    </section>
    <div id="rtInfo">
        <!--===============================   Section 5 =======================================  -->
        <section headerLabel="NEW HIV DIAGNOSIS - RECENCY TESTING (RT) INFORMATION">
            <table class="baseline-aligned" cellspacing="0" cellpadding="6" width="100%">
                <th colspan="2">Rapid Assay for Recency</th>
                <tr>
                    <td width="50%">
                        <strong>Recency Assay test done:</strong> <br /><br />
                        <obs conceptId="$@RECENCY_ASSAY_TEST@" answerConceptIds="$@YES@, $@NO@"
                            answerLabels="Yes(Oui), No(Non)" labelText="Recency Assay test done:"
                            id="Recency_Assay_test_done" style="radio" /> <br /><br />
                        <obs conceptId="$@RECENCY_TEST_NAME@" labelText="Test name" id="Test_name"
                            class="other_reason_here" />
                        <br /><br />
                        <obs conceptId="$@RECENCY_TEST_DATE@" labelText="Test date:" id="Test_date"
                            class="other_reason_here" />
                    </td>
                    <td>
                        <div class="other_reason_here" id="Recency_assay_results">
                            <strong>Recency assay results:</strong><br /> <br />
                            <obs conceptId="$@RECENCY_ASSAY_RESULTS@"
                                answerConceptIds="$@RECENT@, $@LONG-TERM@, $@NEGATIVE@, $@INVALID@"
                                answerLabels="Recent, Long-term, Negative, Invalid" style="radio" />
                        </div>
                    </td>
                </tr>
            </table>
        </section>
        <!--===============================   Section 6 =======================================  -->
        <section headerLabel="NEW HIV DIAGNOSIS - LINKAGE TO TREATMENT INFORMATION">
            <table class="baseline-aligned" cellspacing="0" cellpadding="6" width="100%">
                <th width="40%">Counselled on Linkage</th>
                <th> Linked to treatment</th>
                <th> Linked to treatment at this facility</th>
                <tr>
                    <td>
                        <obs conceptId="$@COUNSELLED_ON_LINKAGE@" labelText="Counselled on Linkage"
                            id="Counselled_on_Linkage" answerConceptIds="$@YES@, $@NO@" answerLabels="Yes(Oui), No(Non)"
                            style="radio" />
                    </td>
                    <td>
                        <div id="Counselled_on_Linkage_yes" class="other_reason_here">
                            <obs conceptId="$@LINKED_TO_TREATMENT@" labelText="Linked to treatment"
                                answerConceptIds="$@YES@, $@NO@" answerLabels="Yes(Oui), No(Non)" style="radio"
                                id="treatLink" /> <br />
                            <div id="yesTreatLink" class="other_reason_here">
                                TRACnet : &#160;&#160;&#160;&#160;
                                <lookup class="value"
                                    complexExpression="#foreach( $TRACnet in $patientIdentifiers.get('TRACnet ID')) $TRACnet #end " />
                                <br />
                                Date : &#160;&#160;&#160;&#160;
                                <lookup class="value" expression="patient.getPatientIdentifier(4).dateCreated" />
                            </div>
                            <div id="noTreatLink" class="other_reason_here">
                                <br />
                                <obs conceptId="$@REASON_NOT_LINKED_TO_TREATMENT@" labelText="If no, why" />
                                <br />
                            </div>
                        </div>
                    </td>
                    <td>
                        <div id="Counselled_on_Linkage_yes_2" class="other_reason_here">
                            <obs conceptId="$@LINKED_TO_TREATMENT_AT_THIS_FACILITY@"
                                labelText="Linked to treatment at this facility?" answerConceptIds="$@YES@, $@NO@"
                                answerLabels="Yes(Oui), No(Non)" style="radio" id="yeswhereTreatLink" />
                            <div id="whereTreatLink" class="other_reason_here">
                                <br />
                                <obs conceptId="$@REASON_LIKEND_TO_FACILITY@" labelText="If no, where" />
                                <br />
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </section>
    </div>
    <!--===============================   Section 7 =======================================  -->
    <section headerLabel="INITIATED ON TB PREVENTING THERAPY (TPT)">
        <table>
            <tr>
                <td>
                    <obs conceptId="$@INITIATED_ON_TPT@" labelText="Initiated on TPT" answerConceptIds="$@YES@, $@NO@"
                        answerLabels="Yes(Oui), No(Non)" style="radio" id="tbMeds" /> <br /><br />
                    <obs conceptId="$@TPT_START_DATE@"
                        labelText="If Yes, TPT start Date (Si oui, date de début du TPT):" id="yesTbMeds"
                        class="other_reason_here" /><br />
                    <div class="other_reason_here" id="noTbMeds">
                        If No, reasons (Si non, pour quelles raisons) <br />
                        <obs conceptId="$@REASON_NOT_INITIATED_ON_TPT@" answerConceptId="$@PATIENT_NOT_WILLING@"
                            answerLabel="Patient not willing (Le client n’est pas encore prêt pour le TPT)"
                            id="aliveOnArt" />
                        <br />
                        <obs conceptId="$@REASON_NOT_INITIATED_ON_TPT@" answerConceptId="$@TPT_IS_CONTRA_INDICATED@"
                            answerLabel="TPT is contra-indicated (Le TPT est contre-indique)" id="stoppedArt" />
                        <br />
                        <obs conceptId="$@REASON_NOT_INITIATED_ON_TPT@"
                            answerConceptId="$@PATIENT_IN_TUBERCULOSIS_TREATMENT@"
                            answerLabel="On TB treatment (Le patient est déjà sous-traitement anti-TB)" id="ltfu" />
                        <br />
                        <obs conceptId="$@REASON_NOT_INITIATED_ON_TPT@" answerConceptId="$@TPT_DRUGS_OUT_OF_STOCK@"
                            answerLabel="TPT drugs out of stock (rupture de stock des medicaments TPT)" id="to" />
                        <br />
                        <obs conceptId="$@REASON_NOT_INITIATED_ON_TPT@"
                            answerConceptId="$@OTHER_REASON_PATIENT_NOT_INITIATED_ON_TPT@"
                            answerLabel="Other specify (Autre, spécifier)" id="otherTbMed" />
                        <br /><br /><br />
                    </div>
                    <obs conceptId="$@OTHER_REASON_PATIENT_NOT_INITIATED_ON_TPT@"
                        labelText="If Other reason for Regimen Change, specify:" id="reasonOtherTbMed"
                        class="other_reason_here" />
                </td>
            </tr>
        </table>
    </section>
    <!--===============================   Section 8 =======================================  -->
    <section headerLabel="INITIATED ON TB PREVENTIVE THERAPY (TPT)">
        <table class="baseline-aligned" cellspacing="0" cellpadding="6" width="100%">
            <tr>
                <td>
                    <strong>Stable :</strong> &#160;&#160;
                    <!-- <obs conceptId="$@STABLE@" id="stable" answerConceptIds="$@YES@, $@NO@"
                        answerLabels="Yes(Oui), No(Non)" style="radio" /> -->
                    <div id="look1">
                        <lookup class="value" complexExpression="#if($fn.latestObs('105718').valueCoded ==1065) STABLE #end
                        #if($fn.latestObs('105718').valueCoded ==1066) UNSTABLE #end 
                        " />
                    </div>
                    <div id="obs1">
                        <obs conceptId="$@STABLE_HIDE@" id="obs_value1" />
                    </div>
                </td>
                <!-- <td>
                    <strong>Initial ART Regimen :</strong> &#160;&#160;
                    <br /><br />
                    <strong>ART Start Regimen :</strong> &#160;&#160;
                    <br /><br />
                    <strong>If different,current ART Regimen :</strong> &#160;&#160;
                    <br /><br />
                    <strong>If different,ART Change Date :</strong> &#160;&#160;
                    <br /><br />
                </td> -->
                <td>
                    <strong>Last Pharmacy pick up :</strong>&#160;&#160;
                    <lookup class="value" expression="fn.latestObs('5096').obsDatetime" />
                    <!-- <lookup class="value" expression="fn.latestObs('105607').obsDatetime" /> -->
                </td>
            </tr>

        </table>
    </section>
    <!--===============================   Section 9 =======================================  -->
    <section headerLabel="CURRENT/LAST ART CLINICAL INFORMATION">
        <table class="baseline-aligned" cellspacing="0" cellpadding="6" width="100%">
            <tr>
                <td>
                    <strong>WHO Stage :</strong> &#160;&#160;
                    <lookup class="value" complexExpression="#if($fn.latestObs('1480').valueCoded ==1204) 1 #end
                            #if($fn.latestObs('1480').valueCoded ==1205) 2 #end
                            #if($fn.latestObs('1480').valueCoded ==1206) 3 #end
                            #if($fn.latestObs('1480').valueCoded ==1207) 4 #end
                            " />
                    <br /><br />
                    <strong>WHO Staging Date :</strong> &#160;&#160;
                    <lookup class="value" expression="fn.latestObs('1480').obsDatetime" />
                </td>
                <td>
                    <strong>CD4 count result :</strong> &#160;&#160;
                    <lookup class="value" expression="fn.latestObs('5497').valueNumeric" />
                    <br /><br />
                    <strong>Collection date :</strong> &#160;&#160;
                    <obs conceptId="$@RECENCY_SAMPLE_COLLECTION_DATE@" />

                    <br /><br />
                    <strong>Result return date :</strong> &#160;&#160;
                    <lookup class="value" expression="fn.latestObs('5497').obsDatetime" />
                    <!-- <obs conceptId="$@DATE_OF_RETURNED_RESULT@" /> -->
                    <br />
                </td>
                <td>
                    <strong>Viral load result :</strong>&#160;&#160;
                    <lookup class="value" expression="fn.latestObs('856').valueNumeric" />
                    <br /><br />
                    <strong>Collection date :</strong> &#160;&#160;
                    <obs conceptId="$@RECENCY_COLLECTION_DATE@" />
                    <br /><br />
                    <strong>Result return date :</strong> &#160;&#160;
                    <lookup class="value" expression="fn.latestObs('856').obsDatetime" />
                    <!-- <obs conceptId="$@RECENCY_VIRAL_LOAD_RESULT_DATE@" /> -->
                    <br /><br />
                </td>
                <td>
                    <strong>OI Name :</strong> &#160;&#160;
                    <lookup class="value"
                        complexExpression="#foreach($oi in $fn.allObs(1607)) $oi.valueCoded.name #end" />
                    <br /><br />
                    <strong>OI Diagnosis Date :</strong> &#160;&#160;
                    <lookup class="value" expression="fn.latestObs('1480').obsDatetime" />
                </td>

            </tr>
        </table>
    </section>

    <submit />


</htmlform>